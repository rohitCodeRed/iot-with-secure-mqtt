<script>

var PORT = document.getElementById("serverInfoElem").getAttribute("data-port");
var IP = document.getElementById("serverInfoElem").getAttribute("data-ip");
var END_POINT = document.getElementById("serverInfoElem").getAttribute("data-ep");


const CURRENT_INFO={
    ip:IP,
    port:PORT,
    endPoint:"\/"+END_POINT
}

var socket = new WebSocket("ws:\/\/"+CURRENT_INFO.ip+":"+CURRENT_INFO.port+CURRENT_INFO.endPoint);
    // Connection opened
    socket.addEventListener('open', (event) => {
        socket.send('Hello Server!, Send latest changed data..');
    });

    // Listen for messages
    socket.addEventListener('message', (event) => {
        var serverData = JSON.parse(event.data);
        console.log(serverData);

        //TODO....

    });

    socket.addEventListener('close',()=>{
        console.log("Connection got closed.. bye bye server");
    });

    socket.addEventListener("error",(err)=>{
        console.log("Error occured", err);
        console.log("Server info: ",CURRENT_INFO);
    });


//----------Socket code end------------------------------------
 
</script>